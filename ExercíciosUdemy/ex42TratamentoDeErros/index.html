<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tratamento de erros</title>
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>

<body>

    <script>
        // Criando um array para armazenar informações de vídeos (simulando um sistema de streaming)
        let video = []

        // Adicionamos um vídeo chamado "video2" e criamos propriedades dentro dele
        video['video2'] = [] // Criamos um array dentro de "video"
        video['video2']['nome'] = 'Marvel' // Definimos o nome do vídeo
        video['video2']['categoria'] = 'Filme de ação' // Definimos a categoria do vídeo

        // Função que tenta acessar e exibir o nome de um vídeo dentro do array
        function getVideo(video) {
            try {
                // Tentamos acessar a propriedade 'nome' de um vídeo dentro do array na posição [0]
                console.log(video[0]['nome']) 
                // ERRO: "video[0]" não existe, pois os vídeos estão armazenados com chave de texto ('video2')
            
            } catch (erro) {
                // Se ocorrer um erro, capturamos e exibimos uma mensagem personalizada no console
                console.log('Agora sim podemos tratar esse erro')

                // Lançamos um erro personalizado para informar o problema
                throw new Error('Houve um erro, mas não se preocupe, estamos trabalhando nisso agora!!!')
            
            } finally {
                // O bloco "finally" sempre será executado, independentemente de erro ou sucesso
                console.log('Sempre passa por aqui (try / catch)')
            }

            // Essa linha será executada apenas se o erro não interromper o código
            console.log('A aplicação não morreu')
        }

        // Função para lidar com o erro (poderia registrar em um servidor, por exemplo)
        function tratarErro(e) {
            console.log(e) // Exibe detalhes do erro no console
        }

        // Chamamos a função getVideo passando o objeto "video"
        getVideo(video)
    </script>

</body>
</html>
